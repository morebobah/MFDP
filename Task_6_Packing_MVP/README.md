# Приложение для прогноза сроков строительства базовых станций.
Модель была обучена на датасете из 41541 записей с контрольными точками технологического процесса строительства или модернизации объектов связи. 
1. На начальном этапе известны только параметры присущие самому планируемому объекту связи, такие как, место размещения, тип объекта, технологии, которые планируется строить, сопряженные объекты связи. По этим данным система прогнозирует предварительный срок строительства объекта связи. На данном этапе допустима точность прогнозирования в пределах одного квартала.
2. По мере работы над строительством базовой станции появляются даты важных производственных этапов. Каждый дополнительный шаг производственного процесса приводит к появлению дополнительного признака, который уточняет прогноз. Прогнозы с момента эатапа выдачи оборудования должны быть в пределах недели.

Для запуска приложения docker должен быть установлен и запущен.
Порядок установки приложения.
1. Создайте каталог для размещения приложения. Например, mfdp
2. Используя командную строку Вашей оболочки перейдите в созданный каталог. Например, cd mfdp
3. Скачайте приложение с репозитория. Используйте команду git clone https://github.com/morebobah/MFDP.git
4. Перейдите в каталог приложения, cd MFDP\Task_6_Packing_MVP
5. Создайте файл для переменных окружения в каталоге app по формату ниже. Например, используя команду:
    cat <<EOF >>.env
    SECRET_KEY=gV64m9aIzFG4qpgVphvQbPQrtAO0nM-7YwwOvu0XPt5KJOjAy4AfgLkqJXYEt
    ALGORITHM=HS256
    POSTGRES_USER=pguser
    POSTGRES_PASSWORD=pgpassword
    POSTGRES_DB=fmdbdb
    DB_HOST=database
    DB_PORT=5432
    DB_NAME=fmdbdb
    DB_USER=pguser
    DB_PASSWORD=pgpassword
    RABBITMQ_DEFAULT_USER=rbbmq
    RABBITMQ_DEFAULT_PASSWORD=rbbmqpwd
    DATABASE_URL=postgres://user:password@database:5432/fmdbdb
    RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672/
    COOKIE_NAME=users_access_token
    EOF
6. Скопируйте, или создайте симлинк, файла .env в папке mlworker. Например, можно использовать команды:
    cp app/.env mlworker/.env
    или
    ln app/.env mlworker/.env
7. Соберите образ. Используйте команду docker-compose build
8. Запустите приложение. Используйте команду docker-compose up
9. Дождитесь пока все необходимые службы будут запущены.
10. Доступ к web интерфейсу приложения по ссылке http:\\127.0.0.1 или http:\\127.0.0.1:8000
11. При запуске приложения создаются тестовый пользователь user@test.ru с паролем testpwd.
    При необходимости вы можете создать своих пользователей на странице http:\\127.0.0.1\registration
12. Файл subdata.xlsx может использоваться для тестирования эндпоинта /usersuser/event/upload/excel/, при загрузке excel файла с данными об объектах пакет создается автоматически.
13. Для работы необходимо создать пакет с мероприятиями эндпоинт /users/user/packet/add, можно указать имя пакета, но это не обязательно.
14. Далее в пакет нужно добавить один /users/user/packet/add или несколько /users/user/event/batch/add мероприятий для прогнозирования.
15. Для прогнозирования запустить эндпоинт /ml/predict.
16. Результат прогнозирования можно увидеть при выгрузке с помощью эндпоинта /users/user/events в поле target.
17. Для входа в личный кабинет проще всего использовать пользовательский интерфейс для сервиса http:\\127.0.0.1\login
